<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>You Are Invited | Mythic Novel</title>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="manifest" href="/site.webmanifest">

    <!-- Additional Meta Tags for Better Support -->
    <meta name="theme-color" content="#0a0f0a">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #0a0f0a;
            --accent: #4ade80;
            --accent-bright: #6ee7b7;
            --gold: #fbbf24;
            --text: #ffffff;
            --text-muted: #d1d5db;
            --glass: rgba(74, 222, 128, 0.15);
            --glass-border: rgba(74, 222, 128, 0.4);
        }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background: linear-gradient(180deg, #0a0f0a 0%, #050a05 100%);
            color: var(--text);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden; 
        }

        .container {
            max-width: 800px;
            margin: 60px auto;
            background: var(--glass);
            backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid var(--glass-border);
            border-radius: 30px;
            overflow: hidden;
            position: relative;
            z-index: 1;
            box-shadow: 0 30px 90px rgba(0, 0, 0, 0.4),
                        0 0 100px rgba(74, 222, 128, 0.1);
        }

        .form-header {
            background: linear-gradient(135deg, var(--primary) 0%, #1a2e1a 100%);
            color: white;
            padding: 4rem 2rem;
            text-align: center;
            position: relative;
            border-bottom: 1px solid var(--glass-border);
            overflow: hidden;
        }

        .form-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--accent), transparent);
            animation: scanline 3s linear infinite;
        }

        @keyframes scanline {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .form-header h1 {
            font-size: clamp(2.5rem, 5vw, 3.5rem);
            font-weight: 900;
            letter-spacing: -2px;
            margin-bottom: 0;
            background: linear-gradient(135deg, #ffffff, var(--accent), #ffffff);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradientShift 3s ease infinite;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .form-header p {
            font-size: 1.2rem;
            color: var(--text-muted);
            line-height: 1.6;
        }

        .progress-bar {
            display: flex;
            justify-content: space-between;
            padding: 3rem 2rem 2rem;
            margin-bottom: 0;
            background: rgba(0, 0, 0, 0.2);
            border-bottom: none;
        }

        .progress-step {
            flex: 1;
            text-align: center;
            position: relative;
        }

        .progress-step::before {
            content: attr(data-step);
            display: inline-block;
            width: 40px;
            height: 40px;
            line-height: 40px;
            background: rgba(74, 222, 128, 0.1);
            border: 2px solid rgba(74, 222, 128, 0.3);
            border-radius: 50%;
            font-weight: bold;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
            transition: all 0.3s ease;
        }



        .progress-step span {
            display: block;
            font-size: 0.875rem;
            color: var(--text-muted);
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        .form-content {
            padding: 3rem 3rem 3rem;
            background: rgba(0, 0, 0, 0.2);
        }

        .form-section {
            margin-bottom: 4rem;
            padding: 2.5rem;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 20px;
            border: 1px solid rgba(74, 222, 128, 0.1);
            position: relative;
        }

        .form-section:last-child {
            margin-bottom: 0;
        }

        .form-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(74, 222, 128, 0.3), transparent);
        }

        .section-title {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--text);
            margin-bottom: 2.5rem;
            padding-bottom: 1.2rem;
            border-bottom: 1px solid rgba(74, 222, 128, 0.2);
            letter-spacing: -1px;
            position: relative;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            width: 100px;
            height: 3px;
            background: var(--accent);
            border-radius: 2px;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: var(--text);
            font-size: 0.95rem;
            letter-spacing: 0.3px;
        }

        label .required {
            color: var(--accent);
        }

        input[type="text"],
        input[type="email"],
        input[type="url"],
        select,
        textarea {
            width: 100%;
            padding: 1rem 1.25rem;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(74, 222, 128, 0.2);
            border-radius: 12px;
            font-size: 1rem;
            color: var(--text);
            transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
            font-family: 'Inter', -apple-system, sans-serif;
        }

        input::placeholder,
        textarea::placeholder {
            color: rgba(255, 255, 255, 0.3);
        }

        /* Fix autofill background color */
        input:-webkit-autofill,
        input:-webkit-autofill:hover,
        input:-webkit-autofill:focus,
        input:-webkit-autofill:active,
        select:-webkit-autofill,
        select:-webkit-autofill:hover,
        select:-webkit-autofill:focus,
        select:-webkit-autofill:active {
            -webkit-background-clip: text;
            -webkit-text-fill-color: var(--text);
            transition: background-color 5000s ease-in-out 0s;
            box-shadow: inset 0 0 20px 20px rgba(0, 0, 0, 0.5);
        }

        input:-webkit-autofill::first-line {
            color: var(--text);
        }

        /* Custom dropdown styling */
        .select-wrapper {
            position: relative;
            width: 100%;
        }

        .select-wrapper::after {
            content: '';
            position: absolute;
            right: 1.25rem;
            top: 50%;
            transform: translateY(-50%);
            width: 0;
            height: 0;
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-top: 6px solid rgba(255, 255, 255, 0.5);
            pointer-events: none;
            transition: transform 0.3s ease;
        }

        .select-wrapper.open::after {
            transform: translateY(-50%) rotate(180deg);
        }

        select {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            padding-right: 3rem;
        }

        select option {
            background: var(--primary);
            color: var(--text);
        }

        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: var(--accent);
            background: rgba(0, 0, 0, 0.7);
            box-shadow: 0 0 0 3px rgba(74, 222, 128, 0.1),
                        0 10px 30px rgba(74, 222, 128, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 120px;
        }

        /* Phone input wrapper styles */
        .phone-input-wrapper {
            display: flex;
            gap: 0.75rem;
            align-items: stretch;
        }

        .phone-input-wrapper .select-wrapper {
            width: 70px;
            flex-shrink: 0;
        }

        .phone-input-wrapper select {
            width: 100%;
            padding: 1.125rem 0.75rem;
            font-size: 0.85rem;
            padding-right: 2rem;
        }

        .phone-input-wrapper .select-wrapper::after {
            right: 0.5rem;
            border-left: 3px solid transparent;
            border-right: 3px solid transparent;
            border-top: 4px solid rgba(255, 255, 255, 0.5);
        }

        .phone-input-wrapper input[type="text"] {
            flex: 1;
            min-width: 0;
        }

        select[data-country-select] option {
            padding: 0.5rem;
        }

        .microcopy {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.4);
            margin-top: 0.5rem;
            font-style: normal;
            line-height: 1.4;
        }

        .radio-group,
        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            margin-top: 0.5rem;
        }

        .radio-item,
        .checkbox-item {
            display: flex;
            align-items: flex-start;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(74, 222, 128, 0.1);
            border-radius: 12px;
            transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
            cursor: pointer;
        }

        @media (min-width: 1024px) {
            .radio-item:hover,
            .checkbox-item:hover {
                background: rgba(74, 222, 128, 0.05);
                border-color: rgba(74, 222, 128, 0.3);
                transform: translateX(5px);
            }
        }

        @media (max-width: 1023px) {
            .radio-item:hover,
            .checkbox-item:hover {
                background: rgba(74, 222, 128, 0.05);
                border-color: rgba(74, 222, 128, 0.3);
                /* No transform on tablet/mobile */
            }
        }

        .radio-item input[type="radio"],
        .checkbox-item input[type="checkbox"] {
            margin-right: 1rem;
            margin-top: 0.25rem;
            flex-shrink: 0;
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .radio-item input[type="radio"]:focus,
        .checkbox-item input[type="checkbox"]:focus {
            outline: none !important;
            box-shadow: none !important;
        }

        .radio-item input[type="radio"]:focus-visible,
        .checkbox-item input[type="checkbox"]:focus-visible {
            outline: none !important;
            box-shadow: none !important;
        }

        .radio-item input[type="radio"],
        .checkbox-item input[type="checkbox"] {
            accent-color: var(--accent);
        }

        .radio-item > div,
        .checkbox-item > div {
            font-weight: 500;
            margin-bottom: 0;
            color: var(--text);
            flex: 1;
        }

        .radio-description {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.4);
            margin-top: 0.25rem;
        }

        .form-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid var(--glass-border);
        }

        .btn {
            padding: 18px 45px;
            border: none;
            border-radius: 100px;
            font-size: 17px;
            font-weight: 600;
            cursor: pointer;
            font-family: 'Inter', -apple-system, sans-serif;
            letter-spacing: 0.5px;
            transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
            position: relative;
            overflow: hidden;
            z-index: 1;
        }

        .btn-primary {
            background: white;
            color: var(--primary);
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: var(--accent);
            transform: translate(-50%, -50%);
            transition: width 0.6s ease, height 0.6s ease;
            z-index: -1;
        }

        .btn-primary:hover:not(:disabled) {
            color: white;
            transform: scale(1.05);
            box-shadow: 0 20px 40px rgba(74, 222, 128, 0.3);
        }

        .btn-primary:hover:not(:disabled)::before {
            width: 500px;
            height: 500px;
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-secondary {
            background: transparent;
            color: var(--text-muted);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.3);
            color: var(--text);
            transform: scale(1.02);
        }

        #formMessage {
            padding: 1.5rem;
            border-radius: 12px;
            margin-top: 2rem;
            text-align: center;
            display: none;
            font-weight: 500;
            backdrop-filter: blur(10px);
        }

        #formMessage.success {
            background: rgba(74, 222, 128, 0.2);
            color: var(--accent-bright);
            border: 1px solid var(--accent);
            display: block;
            animation: slideInUp 0.5s ease;
        }

        #formMessage.error {
            background: rgba(239, 68, 68, 0.2);
            color: #fca5a5;
            border: 1px solid rgba(239, 68, 68, 0.5);
            display: block;
            animation: shake 0.5s ease;
        }

        #formMessage.loading {
            background: rgba(74, 222, 128, 0.1);
            color: var(--accent);
            border: 1px solid rgba(74, 222, 128, 0.3);
            display: block;
            animation: pulse 2s infinite;
        }

        @keyframes slideInUp {
            from {
                transform: translateY(20px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        /* Investor Evidence Section */
        .investor-evidence-section {
            background: rgba(74, 222, 128, 0.05);
            border: 1px solid rgba(74, 222, 128, 0.2);
        }

        .investor-text {
            color: var(--text-muted);
            line-height: 1.6;
            margin-bottom: 1.5rem;
            font-size: 0.95rem;
        }

        /* Validation Error Styles */
        .field-error {
            border-color: #ef4444 !important;
            background: rgba(239, 68, 68, 0.05) !important;
            animation: shake 0.3s ease;
        }

        .validation-message {
            color: #fca5a5;
            font-size: 0.875rem;
            margin-top: 0.5rem;
            padding: 0.5rem 0.75rem;
            background: rgba(239, 68, 68, 0.1);
            border-left: 3px solid #ef4444;
            border-radius: 4px;
            display: none;
        }

        .validation-message.show {
            display: block;
            animation: slideInUp 0.3s ease;
        }

        #loiValidationMessage {
            margin-top: 1rem;
            padding: 1rem;
            background: rgba(239, 68, 68, 0.15);
            color: #fca5a5;
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 12px;
            text-align: center;
            display: none;
            font-size: 0.95rem;
        }

        #loiValidationMessage.show {
            display: block;
            animation: slideInUp 0.3s ease;
        }

        .btn-loi {
            padding: 18px 45px;
            border: none;
            border-radius: 100px;
            font-size: 17px;
            font-weight: 600;
            cursor: pointer;
            font-family: 'Inter', -apple-system, sans-serif;
            letter-spacing: 0.5px;
            transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
            position: relative;
            overflow: hidden;
            z-index: 1;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-bright) 100%);
            color: var(--primary);
            box-shadow: 0 4px 15px rgba(74, 222, 128, 0.3);
            min-width: 260px; /* Match the home page button width */
        }

        .btn-loi:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(74, 222, 128, 0.4);
        }

        /* LOI Modal Styles */
        .loi-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .loi-modal.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .loi-modal-content {
            background: var(--primary);
            width: 90%;
            max-width: 900px;
            height: 90vh;
            border-radius: 20px;
            position: relative;
            display: flex;
            flex-direction: column;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5),
                        0 0 100px rgba(74, 222, 128, 0.1);
            border: 1px solid var(--glass-border);
            overflow: hidden;
        }

        /* Header removed to save vertical space */

        .loi-modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 40px;
            height: 40px;
            background: var(--primary);
            border: 2px solid var(--accent);
            border-radius: 50%;
            font-size: 24px;
            line-height: 1;
            color: var(--text);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 10;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .loi-modal-close:hover {
            background: var(--accent);
            color: var(--primary);
            transform: scale(1.1);
        }

        .loi-modal-close:active {
            transform: scale(0.95);
        }

        .loi-modal-body {
            flex: 1;
            padding: 2rem;
            padding-bottom: 3rem; /* Extra bottom padding */
            overflow-y: auto; /* Modal body handles scrolling */
            overflow-x: hidden;
            background: rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: column;
            scrollbar-width: thin; /* Firefox */
            scrollbar-color: var(--accent) rgba(255, 255, 255, 0.1); /* Firefox */
        }

        /* Custom scrollbar styling for Webkit browsers */
        .loi-modal-body::-webkit-scrollbar {
            width: 12px;
        }

        .loi-modal-body::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 6px;
        }

        .loi-modal-body::-webkit-scrollbar-thumb {
            background: var(--accent);
            border-radius: 6px;
            border: 2px solid transparent;
            background-clip: content-box;
        }

        .loi-modal-body::-webkit-scrollbar-thumb:hover {
            background: var(--accent-bright);
            background-clip: content-box;
        }

        #signwell-iframe-container {
            width: 100%;
            height: 100%;
            border-radius: 12px;
            position: relative;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        /* Let SignWell control its own iframe */
        #signwell-iframe-container iframe {
            width: 100% !important;
            height: 100% !important;
            border: none;
            border-radius: 12px;
        }

        .loi-loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: var(--text-muted);
        }

        .loi-spinner {
            border: 3px solid rgba(74, 222, 128, 0.1);
            border-top: 3px solid var(--accent);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin-bottom: 1.5rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loi-error-message {
            background: rgba(239, 68, 68, 0.2);
            color: #fca5a5;
            border: 1px solid rgba(239, 68, 68, 0.3);
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
        }

        .loi-success-message {
            background: rgba(74, 222, 128, 0.2);
            color: var(--accent-bright);
            border: 1px solid var(--accent);
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
        }


        /* Responsive Design - Comprehensive */

        /* Large Desktop: 1440px and up */
        @media (min-width: 1440px) {
            .container {
                max-width: 900px;
            }
        }

        /* Desktop: 1024px to 1439px */
        @media (max-width: 1439px) {
            .container {
                max-width: 800px;
            }
        }

        /* Tablet: 768px to 1023px */
        @media (max-width: 1023px) {
            .container {
                margin: 40px auto;
            }

            .form-header {
                padding: 3rem 1.5rem;
            }

            .form-section {
                padding: 2rem;
                margin-bottom: 3rem;
            }

            .form-content {
                padding: 2rem 2rem;
            }
        }

        /* Mobile: 481px to 767px */
        @media (max-width: 767px) {
            /* LOI Modal Mobile Styles - Full screen */
            .loi-modal {
                padding: 0; /* Remove any modal padding */
            }

            .loi-modal-content {
                width: 100%;
                height: 100vh;
                max-width: 100%;
                border-radius: 0; /* No rounded corners on mobile */
                margin: 0;
            }

            /* Header removed - mobile adjustments for close button */
            .loi-modal-close {
                top: 10px;
                right: 10px;
                width: 35px;
                height: 35px;
                font-size: 20px;
                z-index: 20; /* Ensure it stays on top */
            }

            .loi-modal-body {
                padding: 0; /* No padding - full width */
                border-radius: 0;
            }

            #signwell-iframe-container {
                border-radius: 0; /* Square edges on mobile */
            }

            .investor-text {
                font-size: 0.9rem;
            }

            .btn-loi {
                width: 100%;
                max-width: none;
            }
            body {
                padding: 0;
            }

            .container {
                margin: 0;
                border-radius: 0;
                max-width: 100%;
            }

            .form-header {
                padding: 2.5rem 1.5rem;
                border-radius: 0;
            }

            .form-header h1 {
                font-size: 2rem;
                letter-spacing: -1px;
            }

            .form-header p {
                font-size: 1rem;
            }

            .progress-bar {
                display: none; /* Hide entire progress bar on mobile */
            }

            .form-content {
                padding: 1.5rem 1.5rem;
            }

            .form-section {
                padding: 1.75rem;
                margin-bottom: 2.5rem;
                border-radius: 15px;
            }

            .section-title {
                font-size: 1.5rem;
                margin-bottom: 1.75rem;
            }

            .form-group {
                margin-bottom: 1.25rem;
            }

            input[type="text"],
            input[type="email"],
            input[type="url"],
            select,
            textarea {
                padding: 0.875rem 1rem;
                font-size: 16px !important; /* Prevents zoom on iOS */
                -webkit-text-size-adjust: 100%; /* Prevent font scaling in landscape */
            }

            .radio-item,
            .checkbox-item {
                padding: 0.875rem;
            }

            .btn {
                padding: 16px 35px;
                font-size: 16px;
                width: 100%;
                max-width: none;
            }

            .btn-secondary {
                margin-bottom: 1rem;
            }

            .form-actions {
                flex-direction: column-reverse;
                gap: 1rem;
            }
        }

        /* Small Mobile: 480px and below */
        @media (max-width: 480px) {
            .form-header {
                padding: 2rem 1rem;
            }

            .form-header h1 {
                font-size: 1.75rem;
            }

            .form-header p {
                font-size: 0.95rem;
            }


            .form-content {
                padding: 1rem 1rem;
            }

            .form-section {
                padding: 1.25rem;
                margin-bottom: 2rem;
            }

            .section-title {
                font-size: 1.3rem;
                margin-bottom: 1.5rem;
            }

            label {
                font-size: 0.9rem;
            }

            .microcopy,
            .radio-description {
                font-size: 11px;
            }

            input[type="text"],
            input[type="email"],
            input[type="url"],
            select,
            textarea {
                padding: 0.75rem 0.875rem;
            }

            .radio-item,
            .checkbox-item {
                padding: 0.75rem;
            }

            .radio-item input[type="radio"],
            .checkbox-item input[type="checkbox"] {
                width: 18px;
                height: 18px;
            }

            .btn {
                padding: 14px 28px;
                font-size: 15px;
            }

            #formMessage {
                padding: 1rem;
                font-size: 14px;
            }
        }

        
        /* Very Small Mobile: 374px and below */
        @media (max-width: 374px) {
            .form-header h1 {
                font-size: 1.5rem;
            }

            .form-section {
                padding: 1rem;
            }

            .section-title {
                font-size: 1.2rem;
            }

            .btn {
                padding: 12px 24px;
                font-size: 14px;
            }
        }
    </style>
    <!-- SignWell Embedded Library -->
    <script type="text/javascript" src="https://static.signwell.com/assets/embedded.js"></script>
</head>
<body>
    <div class="container">
        <div class="form-header">
            <h1>You're Invited!</h1>
        </div>

        <form id="invitationForm" class="form-content">
            <!-- Contact Information -->
            <div class="form-section">
                <div class="form-group">
                    <label for="firstName">First Name <span class="required">*</span></label>
                    <input type="text" id="firstName" name="firstName" required>
                </div>

                <div class="form-group">
                    <label for="lastName">Last Name <span class="required">*</span></label>
                    <input type="text" id="lastName" name="lastName" required>
                </div>

                <!-- Hidden field to maintain order -->
                <input type="hidden" name="penName" value="">

                <div class="form-group">
                    <label for="email">Email Address <span class="required">*</span></label>
                    <input type="email" id="email" name="email" required>
                </div>

                <div class="form-group">
                    <label for="phoneNumber">Phone Number (Optional)</label>
                    <div class="phone-input-wrapper">
                        <div class="select-wrapper">
                            <select id="countryCode" name="countryCode" title="Select your country code" data-country-select>
                                <option value="+1" data-display="+1">USA</option>
                                <option value="+1" data-display="+1">Canada</option>
                                <option value="+44" data-display="+44">United Kingdom</option>
                                <option value="+61" data-display="+61">Australia</option>
                                <option value="+64" data-display="+64">New Zealand</option>
                                <option value="+353" data-display="+353">Ireland</option>
                                <option value="+33" data-display="+33">France</option>
                                <option value="+49" data-display="+49">Germany</option>
                                <option value="+39" data-display="+39">Italy</option>
                                <option value="+34" data-display="+34">Spain</option>
                                <option value="+31" data-display="+31">Netherlands</option>
                                <option value="+32" data-display="+32">Belgium</option>
                                <option value="+43" data-display="+43">Austria</option>
                                <option value="+41" data-display="+41">Switzerland</option>
                                <option value="+46" data-display="+46">Sweden</option>
                                <option value="+47" data-display="+47">Norway</option>
                                <option value="+45" data-display="+45">Denmark</option>
                                <option value="+358" data-display="+358">Finland</option>
                                <option value="+48" data-display="+48">Poland</option>
                                <option value="+351" data-display="+351">Portugal</option>
                                <option value="+30" data-display="+30">Greece</option>
                                <option value="+420" data-display="+420">Czech Republic</option>
                                <option value="+36" data-display="+36">Hungary</option>
                                <option value="+40" data-display="+40">Romania</option>
                                <option value="+55" data-display="+55">Brazil</option>
                                <option value="+52" data-display="+52">Mexico</option>
                                <option value="+54" data-display="+54">Argentina</option>
                                <option value="+91" data-display="+91">India</option>
                                <option value="+81" data-display="+81">Japan</option>
                                <option value="+84" data-display="+84">Vietnam</option>
                                <option value="+27" data-display="+27">South Africa</option>
                            </select>
                        </div>
                        <input type="text" id="phoneNumber" name="phoneNumber" placeholder="123 456 7890">
                    </div>
                </div>

                <!-- Hidden fields to maintain order from Section 1 -->
                <input type="hidden" name="authorProfileLink" value="">

                <!-- Hidden fields for Section 2 -->
                <input type="hidden" name="publishingExperience" value="">
                <input type="hidden" name="releaseStyle" value="">
                <!-- Note: formats will be handled as empty array in JavaScript -->
                <input type="hidden" name="primaryGenre" value="">
                <input type="hidden" name="subgenre" value="">
                <input type="hidden" name="communityHub" value="">
                <input type="hidden" name="mailingListSize" value="">
                <input type="hidden" name="paidSubscribers" value="">
                <input type="hidden" name="totalSales" value="">

                <!-- Section 3 visible fields -->
                <div class="form-group">
                    <label for="platformAppeal">What aspects of our platform are most appealing to you? (Optional)</label>
                    <textarea id="platformAppeal" name="platformAppeal"></textarea>
                </div>

                <div class="form-group">
                    <label for="questions">Do you have any immediate questions or concerns about our platform? (Optional)</label>
                    <textarea id="questions" name="questions"></textarea>
                </div>

                <!-- Hidden field for referralSource -->
                <input type="hidden" name="referralSource" value="">
            </div>

            <!-- Hidden fields for tracking (these come at the end) -->
            <input type="hidden" id="origination" name="origination" value="Direct - Top">
            <input type="hidden" id="formOpenedAt" name="formOpenedAt" value="">

            <!-- Honeypot field - hidden from real users but bots will fill it -->
            <div style="position: absolute; left: -9999px;">
                <label for="website">Website</label>
                <input type="text" id="website" name="website" tabindex="-1" autocomplete="off">
            </div>

            <!-- Section 4: Investor Evidence -->
            <div class="form-section investor-evidence-section">
                <h2 class="section-title">Investor Evidence</h2>
                <p class="investor-text">This LOI is what we show to investors. It's not legally binding in any way, but they hold more weight to investors than just collecting emails.</p>
                <div style="display: flex; justify-content: center;">
                    <button type="button" class="btn btn-loi" id="viewLoiBtn">View LOI</button>
                </div>
                <div id="loiValidationMessage"></div>
            </div>
            

            <div class="form-actions">
                <button type="button" class="btn btn-secondary" onclick="window.location.href='/author'">Cancel</button>
            </div>

            <div id="formMessage"></div>
        </form>
    </div>

    <!-- LOI Modal -->
    <div id="loiModal" class="loi-modal">
        <div class="loi-modal-content">
            <button class="loi-modal-close" id="closeLoiModal">&times;</button>
            <div class="loi-modal-body">
                <div id="signwell-iframe-container">
                    <div class="loi-loading">
                        <div class="loi-spinner"></div>
                        <p>Loading document...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Configuration for SignWell
        const SIGNWELL_CONFIG = {
            TEMPLATE_ID: 'd285b005-670c-4154-88f2-14b59a69f75f', // Your SignWell template ID
            // Use full URL for local development, relative path for production
            CREATE_DOCUMENT_ENDPOINT: window.location.hostname === 'localhost'
                ? 'http://localhost:3001/api/create-loi-document'
                : '/api/create-loi-document'
        };

        // Set form opened timestamp when page loads
        document.addEventListener('DOMContentLoaded', function() {
            const now = new Date();
            const formattedDate = now.toLocaleString('en-US', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false
            });
            document.getElementById('formOpenedAt').value = formattedDate;

            // Setup country dropdown display
            const countrySelect = document.querySelector('[data-country-select]');
            if (countrySelect) {
                // Store countries in alphabetical order with USA first
                const countries = [
                    { value: '+1', display: '+1', name: 'USA' },
                    { value: '+54', display: '+54', name: 'Argentina' },
                    { value: '+61', display: '+61', name: 'Australia' },
                    { value: '+43', display: '+43', name: 'Austria' },
                    { value: '+32', display: '+32', name: 'Belgium' },
                    { value: '+55', display: '+55', name: 'Brazil' },
                    { value: '+1', display: '+1', name: 'Canada' },
                    { value: '+420', display: '+420', name: 'Czech Republic' },
                    { value: '+45', display: '+45', name: 'Denmark' },
                    { value: '+358', display: '+358', name: 'Finland' },
                    { value: '+33', display: '+33', name: 'France' },
                    { value: '+49', display: '+49', name: 'Germany' },
                    { value: '+30', display: '+30', name: 'Greece' },
                    { value: '+36', display: '+36', name: 'Hungary' },
                    { value: '+91', display: '+91', name: 'India' },
                    { value: '+353', display: '+353', name: 'Ireland' },
                    { value: '+39', display: '+39', name: 'Italy' },
                    { value: '+81', display: '+81', name: 'Japan' },
                    { value: '+52', display: '+52', name: 'Mexico' },
                    { value: '+31', display: '+31', name: 'Netherlands' },
                    { value: '+64', display: '+64', name: 'New Zealand' },
                    { value: '+47', display: '+47', name: 'Norway' },
                    { value: '+48', display: '+48', name: 'Poland' },
                    { value: '+351', display: '+351', name: 'Portugal' },
                    { value: '+40', display: '+40', name: 'Romania' },
                    { value: '+27', display: '+27', name: 'South Africa' },
                    { value: '+34', display: '+34', name: 'Spain' },
                    { value: '+46', display: '+46', name: 'Sweden' },
                    { value: '+41', display: '+41', name: 'Switzerland' },
                    { value: '+44', display: '+44', name: 'United Kingdom' },
                    { value: '+84', display: '+84', name: 'Vietnam' }
                ];

                function updateDropdownDisplay() {
                    const selectedIndex = countrySelect.selectedIndex;
                    const selectedCountry = countries[selectedIndex];

                    countries.forEach((country, index) => {
                        const option = countrySelect.options[index];
                        if (document.activeElement === countrySelect) {
                            option.textContent = country.name;
                        } else {
                            option.textContent = country.display;
                        }
                    });
                }

                countrySelect.addEventListener('focus', updateDropdownDisplay);
                countrySelect.addEventListener('blur', updateDropdownDisplay);
                countrySelect.addEventListener('change', updateDropdownDisplay);

                updateDropdownDisplay();
            }
        });

        document.getElementById('invitationForm').addEventListener('submit', function(event) {
            event.preventDefault();

            const form = event.target;
            const formData = new FormData(form);
            const submitBtn = document.getElementById('submitBtn');
            const formMessage = document.getElementById('formMessage');

            // Create data object
            const data = {};
            for (let [key, value] of formData.entries()) {
                // Convert phone number to E.164 format for the API
                if (key === 'phoneNumber' && value && value.trim()) {
                    const countryCode = document.getElementById('countryCode').value;
                    const phoneNumber = value.trim();

                    // Remove all non-digit characters from the phone number
                    let cleanedPhone = phoneNumber.replace(/\D/g, '');

                    // For certain countries, remove leading zero if present
                    const countriesRequiringZeroRemoval = ['+44', '+353', '+39', '+61', '+64', '+27'];
                    if (countriesRequiringZeroRemoval.includes(countryCode) && cleanedPhone.startsWith('0')) {
                        cleanedPhone = cleanedPhone.substring(1);
                    }

                    // Combine country code with cleaned phone number
                    data[key] = countryCode + cleanedPhone;
                } else if (key !== 'countryCode') {
                    // Skip the countryCode field itself, we've already used it
                    data[key] = value;
                }
            }

            // Add empty formats array to maintain compatibility with Make.com
            data.formats = [];

            // Replace with your actual Make.com webhook URL
            const webhookUrl = 'https://hook.us2.make.com/5tf3qw1kq7mq7d52ens1n5qeb3fpzq2g';

            // Show loading state
            submitBtn.disabled = true;
            submitBtn.textContent = 'Submitting...';
            formMessage.textContent = 'Processing your application...';
            formMessage.className = 'loading';

            fetch(webhookUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data),
            })
            .then(response => {
                if (response.ok) {
                    formMessage.textContent = 'Thank you for your application! We\'ll review it and get back to you soon.';
                    formMessage.className = 'success';
                    form.reset();

                    // Optional: Redirect after a delay
                    setTimeout(() => {
                        window.location.href = '/author';
                    }, 5000);
                } else {
                    throw new Error('Submission failed');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                formMessage.textContent = 'There was an error submitting your application. Please try again or contact support.';
                formMessage.className = 'error';
            })
            .finally(() => {
                submitBtn.disabled = false;
                submitBtn.textContent = 'Submit Application';
            });
        });


        // Update progress bar based on section visibility with reveal animation
        const sections = document.querySelectorAll('.form-section');
        const progressSteps = document.querySelectorAll('.progress-step');
        const formGroups = document.querySelectorAll('.form-group');

        // Add reveal animation to form groups
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '0';
                    entry.target.style.transform = 'translateY(20px)';
                    setTimeout(() => {
                        entry.target.style.transition = 'all 0.6s cubic-bezier(0.23, 1, 0.32, 1)';
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }, 100);
                    observer.unobserve(entry.target);
                }
            });
        }, observerOptions);

        formGroups.forEach(group => {
            observer.observe(group);
        });

        // Simple scroll-based progress indicator
        window.addEventListener('scroll', () => {
            const scrollPosition = window.scrollY + window.innerHeight / 2;

            sections.forEach((section, index) => {
                const sectionTop = section.offsetTop;
                const sectionBottom = sectionTop + section.offsetHeight;

                // Removed dynamic active class switching
            });
        });

        // SignWell LOI Integration

        // Collect form data for LOI
        function collectFormDataForLOI() {
            const form = document.getElementById('invitationForm');
            const formData = new FormData(form);

            const firstName = formData.get('firstName');
            const lastName = formData.get('lastName');
            const fullName = `${firstName} ${lastName}`;
            const email = formData.get('email');

            const data = {
                // Data for creating the document
                fullName: fullName,
                firstName: firstName,
                lastName: lastName,
                email: email,
                phone: formData.get('phoneNumber') || '',
                platformAppeal: formData.get('platformAppeal') || '',
                questions: formData.get('questions') || ''
            };

            return data;
        }

        // Validate form fields with visual feedback
        function validateRequiredFields() {
            const firstName = document.getElementById('firstName');
            const lastName = document.getElementById('lastName');
            const email = document.getElementById('email');
            const validationMessage = document.getElementById('loiValidationMessage');

            let isValid = true;
            let missingFields = [];
            let firstErrorField = null;

            // Clear previous error states
            [firstName, lastName, email].forEach(field => {
                field.classList.remove('field-error');
            });
            validationMessage.classList.remove('show');

            // Check first name
            if (!firstName.value || firstName.value.trim() === '') {
                firstName.classList.add('field-error');
                missingFields.push('First Name');
                if (!firstErrorField) firstErrorField = firstName;
                isValid = false;
            }

            // Check last name
            if (!lastName.value || lastName.value.trim() === '') {
                lastName.classList.add('field-error');
                missingFields.push('Last Name');
                if (!firstErrorField) firstErrorField = lastName;
                isValid = false;
            }

            // Check email
            if (!email.value || email.value.trim() === '') {
                email.classList.add('field-error');
                missingFields.push('Email');
                if (!firstErrorField) firstErrorField = email;
                isValid = false;
            } else if (!email.value.includes('@')) {
                email.classList.add('field-error');
                missingFields.push('Valid Email');
                if (!firstErrorField) firstErrorField = email;
                isValid = false;
            }

            // Show validation message if invalid
            if (!isValid) {
                if (missingFields.length === 1) {
                    validationMessage.textContent = `Please fill in your ${missingFields[0]} before viewing the LOI.`;
                } else {
                    validationMessage.textContent = `Please fill in the following required fields: ${missingFields.join(', ')}.`;
                }
                validationMessage.classList.add('show');

                // Smooth scroll to first error field
                if (firstErrorField) {
                    firstErrorField.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    setTimeout(() => firstErrorField.focus(), 500);
                }
            }

            return isValid;
        }

        // Create SignWell document via backend
        async function createSignWellDocument() {
            const data = collectFormDataForLOI();

            // No more alerts - validation is handled separately
            if (!data.firstName || !data.lastName || !data.email || data.firstName.trim() === '') {
                console.error('Required fields are missing');
                return null;
            }

            try {
                // Call your backend endpoint to create the document
                // The backend should handle the SignWell API call securely
                const response = await fetch(SIGNWELL_CONFIG.CREATE_DOCUMENT_ENDPOINT, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        templateId: SIGNWELL_CONFIG.TEMPLATE_ID,
                        recipientName: data.fullName,
                        recipientEmail: data.email,
                        // SignWell template field mappings (API IDs)
                        fields: {
                            DateSigned_1: new Date().toLocaleDateString('en-US'), // Today's date
                            Name_1: data.fullName,  // First Name + Last Name
                            Email_1: data.email,    // Email Address
                            Name_2: data.firstName, // First Name only
                            Name_3: data.fullName   // First Name + Last Name
                            // Note: TextField_3 and Signature_2 are left for author to fill manually
                            // Signature_1 is handled in backend for document sender
                        }
                    })
                });

                if (!response.ok) {
                    throw new Error('Failed to create document');
                }

                const result = await response.json();
                return result.embedded_signing_url;

            } catch (error) {
                console.error('Error creating SignWell document:', error);
                alert('There was an error preparing your LOI. Please ensure your backend endpoint is configured.');
                return null;
            }
        }

        // Show LOI modal with SignWell embedded document
        async function showLOI() {
            // Bot detection - check honeypot field BEFORE any API calls
            const honeypot = document.getElementById('website');
            if (honeypot && honeypot.value !== '') {
                // Bot detected - show fake success WITHOUT calling SignWell API
                console.log('Bot detected - blocking SignWell API call');
                const formMessage = document.getElementById('formMessage');
                formMessage.textContent = 'Thank you! We\'ll be in touch soon with progress updates.';
                formMessage.className = 'success';

                // Clear the form
                document.getElementById('invitationForm').reset();

                // Redirect after delay
                setTimeout(() => {
                    window.location.href = '/author';
                }, 5000);
                return; // Don't open LOI or call SignWell API
            }

            // Validate required fields first
            if (!validateRequiredFields()) {
                return; // Exit if validation fails
            }

            // Add small delay to ensure form data is fully committed
            await new Promise(resolve => setTimeout(resolve, 100));

            const modal = document.getElementById('loiModal');
            const container = document.getElementById('signwell-iframe-container');

            // Show modal
            modal.classList.add('active');

            // Show loading state
            container.innerHTML = `
                <div class="loi-loading">
                    <div class="loi-spinner"></div>
                    <p>Preparing your Letter of Intent...</p>
                </div>
            `;

            // Get embedded signing URL from backend
            const embeddedSigningUrl = await createSignWellDocument();

            if (embeddedSigningUrl) {
                // Clear loading state
                container.innerHTML = '';

                // Initialize SignWell embed
                try {
                    const signWellEmbed = new SignWellEmbed({
                        url: embeddedSigningUrl,
                        containerId: 'signwell-iframe-container',
                        allowClose: true,
                        skipDeclineDocumentConfirm: false,
                        // Remove iframeAttributes - let SignWell handle sizing
                        events: {
                            completed: (e) => {
                                console.log('Document signed successfully:', e);

                                // Show initial success message
                                container.innerHTML = `
                                    <div class="loi-success-message">
                                        <h3>Thank you!</h3>
                                        <p>Your Letter of Intent has been signed successfully.</p>
                                        <p>Submitting your information...</p>
                                    </div>
                                `;

                                // Submit the form data to Make.com
                                const form = document.getElementById('invitationForm');
                                const formData = new FormData(form);
                                const data = {};

                                for (let [key, value] of formData.entries()) {
                                    if (key === 'phoneNumber' && value && value.trim()) {
                                        const countryCode = document.getElementById('countryCode').value;
                                        const phoneNumber = value.trim();
                                        let cleanedPhone = phoneNumber.replace(/\D/g, '');

                                        const countriesRequiringZeroRemoval = ['+44', '+353', '+39', '+61', '+64', '+27'];
                                        if (countriesRequiringZeroRemoval.includes(countryCode) && cleanedPhone.startsWith('0')) {
                                            cleanedPhone = cleanedPhone.substring(1);
                                        }

                                        data[key] = countryCode + cleanedPhone;
                                    } else if (key !== 'countryCode') {
                                        data[key] = value;
                                    }
                                }
                                data.formats = [];

                                const webhookUrl = 'https://hook.us2.make.com/5tf3qw1kq7mq7d52ens1n5qeb3fpzq2g';

                                fetch(webhookUrl, {
                                    method: 'POST',
                                    headers: {
                                        'Content-Type': 'application/json',
                                    },
                                    body: JSON.stringify(data),
                                })
                                .then(response => {
                                    if (response.ok) {
                                        // Update success message
                                        container.innerHTML = `
                                            <div class="loi-success-message">
                                                <h3>Thank you!</h3>
                                                <p>Your Letter of Intent has been signed, and your form has been submitted successfully.</p>
                                                <p>We'll be in touch soon with progress updates.</p>
                                            </div>
                                        `;

                                        // Redirect after 10 seconds
                                        setTimeout(() => {
                                            window.location.href = '/author';
                                        }, 10000);
                                    } else {
                                        throw new Error('Submission failed');
                                    }
                                })
                                .catch(error => {
                                    console.error('Error submitting form:', error);
                                    container.innerHTML = `
                                        <div class="loi-error-message">
                                            <h3>Almost there!</h3>
                                            <p>Your LOI was signed, but there was an error submitting your information.</p>
                                            <p>Please contact support or try again.</p>
                                        </div>
                                    `;
                                    setTimeout(() => {
                                        modal.classList.remove('active');
                                    }, 5000);
                                });
                            },
                            declined: (e) => {
                                console.log('Document declined:', e);
                                container.innerHTML = `
                                    <div class="loi-error-message">
                                        <p>You've declined the Letter of Intent.</p>
                                        <p>Feel free to review it again when you're ready.</p>
                                    </div>
                                `;
                                setTimeout(() => {
                                    modal.classList.remove('active');
                                }, 3000);
                            },
                            closed: (e) => {
                                console.log('SignWell closed:', e);
                                // Modal will be closed by the close button handler
                            },
                            error: (e) => {
                                console.error('SignWell error:', e);
                                container.innerHTML = `
                                    <div class="loi-error-message">
                                        <p>An error occurred while loading the document.</p>
                                        <p>Please try again or contact support.</p>
                                    </div>
                                `;
                            }
                        }
                    });

                    signWellEmbed.open();
                } catch (error) {
                    console.error('Error initializing SignWell embed:', error);
                    container.innerHTML = `
                        <div class="loi-error-message">
                            <p>Unable to initialize the document viewer.</p>
                            <p>Please ensure SignWell library is loaded.</p>
                        </div>
                    `;
                }
            } else {
                // Error creating document
                container.innerHTML = `
                    <div class="loi-error-message">
                        <p>Unable to load the Letter of Intent.</p>
                        <p>Please ensure all required fields are filled and try again.</p>
                    </div>
                `;
            }
        }

        // Event Listeners for LOI
        document.getElementById('viewLoiBtn').addEventListener('click', showLOI);

        document.getElementById('closeLoiModal').addEventListener('click', () => {
            document.getElementById('loiModal').classList.remove('active');
        });

        // Clear error state when user starts typing in required fields
        ['firstName', 'lastName', 'email'].forEach(fieldId => {
            const field = document.getElementById(fieldId);
            field.addEventListener('input', function() {
                this.classList.remove('field-error');
                const validationMessage = document.getElementById('loiValidationMessage');
                // Hide validation message if all required fields have values
                const firstName = document.getElementById('firstName').value;
                const lastName = document.getElementById('lastName').value;
                const email = document.getElementById('email').value;
                if (firstName && lastName && email) {
                    validationMessage.classList.remove('show');
                }
            });
        });

        // Close modal when clicking outside
        document.getElementById('loiModal').addEventListener('click', (e) => {
            if (e.target.id === 'loiModal') {
                document.getElementById('loiModal').classList.remove('active');
            }
        });

    </script>

    <!-- Backend Implementation Instructions -->
    <!--
    IMPORTANT: Backend Endpoint Required
    =====================================

    You need to create a backend endpoint at: /api/create-loi-document

    This endpoint should:
    1. Accept POST requests with the form data
    2. Securely store your SignWell API key (never expose it in frontend code!)
    3. Make the SignWell API call to create a document from your template
    4. Return the embedded_signing_url to the frontend

    Example Node.js/Express endpoint:

    app.post('/api/create-loi-document', async (req, res) => {
        const { templateId, recipientName, recipientEmail, fields } = req.body;

        try {
            const response = await fetch('https://www.signwell.com/api/v1/document_templates/documents/', {
                method: 'POST',
                headers: {
                    'X-Api-Key': process.env.SIGNWELL_API_KEY, // Store in environment variable!
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    test_mode: process.env.NODE_ENV !== 'production', // Use test mode in development
                    template_id: templateId,
                    embedded_signing: true,
                    recipients: [{
                        id: '1',
                        placeholder_name: 'Author',
                        name: recipientName,
                        email: recipientEmail
                    }],
                    fields: fields // Pre-fill template fields
                })
            });

            const data = await response.json();

            if (data.recipients && data.recipients[0]) {
                res.json({
                    embedded_signing_url: data.recipients[0].embedded_signing_url
                });
            } else {
                throw new Error('No embedded URL received');
            }
        } catch (error) {
            console.error('SignWell API error:', error);
            res.status(500).json({ error: 'Failed to create document' });
        }
    });

    Configuration Steps:
    ====================
    1. Get your SignWell API key from your account dashboard
    2. Get your LOI template ID from SignWell
    3. Update SIGNWELL_CONFIG.TEMPLATE_ID in the JavaScript above
    4. Create the backend endpoint with your API key stored securely
    5. Update field mappings to match your SignWell template fields
    6. Test with test_mode: true before going to production
    -->
    <!-- Vercel Analytics -->
    <script type="module" src="/analytics.js"></script>
</body>
</html>